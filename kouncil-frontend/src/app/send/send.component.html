<mat-dialog-content>
  <form #sendForm="ngForm" (ngSubmit)="onSubmit()">
    <div class="drawer-header">
      <div class="drawer-title">Send event to {{data.topicName}}</div>
      <div class="spacer"></div>
      <mat-icon mat-dialog-close class="close">close</mat-icon>
    </div>

    <div class="drawer-section-subtitle">
      Available placeholders: {{uuid}<!---->}, {{count}<!---->}, {{timestamp}<!---->}
    </div>
    <div class="drawer-section-title">Key</div>
    <input [(ngModel)]="message.key" matInput type="text" name="key"/>

    <div class="drawer-section-title">Headers
      <button type="button" class="small-button" mat-button disableRipple (click)="addHeader()">+</button>
    </div>
    <div class="header" *ngFor="let header of message.headers; let i = index">
      <input class="header" [(ngModel)]="header.key" placeholder="Header key" matInput type="text" name="header-key-{{i}}">
      <input class="header" [(ngModel)]="header.value" placeholder="Header value" matInput type="text" name="header-value-{{i}}"/>
      <button type="button" class="small-button" mat-button disableRipple (click)="removeHeader(i)">-</button>
    </div>

    <div class="drawer-section-title">Value</div>

    <textarea rows="10" [(ngModel)]="message.value" name="value"></textarea>

    <div class="drawer-section-title">Count</div>
    <div class="drawer-section-subtitle">How many times you want to send this event?</div>
    <div class="count">
      <input matInput type="number" min="1" [formControl]="countControl" name="count"/>
      <button type="button" class="small-button" mat-button disableRipple (click)="decreaseCount()">-</button>
      <button type="button" class="small-button" mat-button disableRipple (click)="increaseCount()">+</button>
    </div>

    <span class="spacer"></span>

    <div class="actions">
      <button type="button" mat-dialog-close mat-button disableRipple class="cancel">Cancel</button>
      <span class="spacer"></span>
      <button mat-button disableRipple class="action" type="submit">Send event</button>
    </div>
  </form>

</mat-dialog-content>

